<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>WKeditor 1.1</title>
    <script src="http://g.tbcdn.cn/kissy/k/1.3.0/kissy-min.js" charset="utf-8"></script>
    <link rel="stylesheet" href="http://g.tbcdn.cn/kissy/k/1.3.0/css/dpl/base-min.css">
    <link rel="stylesheet" href="../index.css">
</head>
<body>
<style type="text/css">
    body{
        background: #eee;
        font:12px/1.5 "微软雅黑";
    }
    #wankePost {
        width: 60%;
        margin: auto;
        background: #fff;
        padding: 10px;
        border-radius: 5px;
    }
    .title{
        font-size: 24px;
        color: #666;
        padding: 10px 10px 10px 20px;
        border-bottom: 1px solid #eee;

    }
    .copyright{
        width: 800px;
        margin: auto;
        border-top: 1px solid #ccc;
        padding: 20px;
        margin-top: 50px;
        text-align: center;

    }
    .top{
        background:#336699;padding:20px;color:#fff;
    }
    .top .bb{
        width:800px;margin:auto
    }
    #WKeditor .ForeColor{
        background: #333;
        font-weight: bold;
    }
    #WKeditor .ForeColor:hover{
        background: #141414;
    }
</style>

<h2 class="top">
    <div class="bb">WKeditor 1.1</div>
</h2>

<div id="wankePost">
    <div class='title'>标题</div>    
    <div id="WKeditor"></div>
</div>
<div class="copyright">14707 @核心</div>
<script>
    var S = KISSY;
    S.Config.debug = true;
    if (S.Config.debug) {
        var srcPath = "../../../";
        S.config({
            packages:[
                {
                    name:"WKeditor",
                    path:"../../",
                    charset:"utf-8",
                    ignorePackageNameInUri:true
                },
                {
                    name:"pixeler",
                    path:"./",
                    charset:"utf-8",
                    ignorePackageNameInUri:true
                },
                {
                    name:"WKfont",
                    path:"../plugin/WKfont/WKfont",
                    charset:"utf-8",
                    ignorePackageNameInUri:true
                },
                {
                    name:"WKimage",
                    path:"../plugin/WKimage/WKimage",
                    charset:"utf-8",
                    ignorePackageNameInUri:true
                },
                {
                    name:"WKvideo",
                    path:"../plugin/WKvideo/WKvideo",
                    charset:"utf-8",
                    ignorePackageNameInUri:true
                }
            ]
        });
    }

    S.use('WKeditor/1.0/index,', function (S, WKeditor) {
        var options = {
            message:'<div class="WKeditor_message"><h3>请输入正文</h3><p>小提示：<br>\
                1. 鼠标选中已输入文字可修改文字样式。<br>\
                2. 支持粘帖截图。<br>\
                3. 移动到未居中的图片上出现居中按钮。<br></div>',
            font:[
                "hugeFont","largeFont","normalFont","strongFont","listText"
            ],
            ele:S.one("#WKeditor")
        }
        var Editor = new WKeditor(options);
        Editor.init();


        /*
            自定义字体
        */
        Editor.addFont({name:"ForeColor",title:"文本颜色",value:"红",command:"ForeColor"},function(e){
              document.execCommand('ForeColor',false,'red');
        });
        /*
            官方插件
        */
        Editor.plug({name:"video",title:"插入视频",value:"视"},function(){
            var self = this;
            KISSY.use("WKvideo,WKvideo.css",function(S,WKvideo){
                var config = {
                    setUrl:function(url){
                        // 你可以通过这个方法设置正确的链接。
                        return url;
                    }
                };
                self.WKvideo = new WKvideo(self.options);
                self.WKvideo.init(config);
            });
        });
        /*
            官方插件
        */
        Editor.plug({name:"image",title:"插入图片",value:"图 "},function(){
            var self = this;
            KISSY.use("WKimage,WKimage.css",function(S,WKimage){
                var config = {
                    action:"upload.php",
                    allowExts:"jpg,gif,png,jpeg"
                    //dragSort:true
                };
                self.WKimage = new WKimage(self.options);
                self.WKimage.init(config);
            });
        });

        /*
            自定义插件
        */
        Editor.plug({name:"my",title:"自定义模版",value:"模"},function(){
            var self = this;
            self.$wrap.fire("click");
            self.tool.insert(S.one("<div><b><font size='4'>模版</font></b><p>自定义模版</p></div>")[0],self.tool.getRange());
            
        });
    });
    


</script>
</body>
</html>